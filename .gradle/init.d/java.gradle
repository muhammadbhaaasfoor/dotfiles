allprojects {
    afterEvaluate { project ->
        if (project.plugins.hasPlugin('java')) {
            project.apply plugin: 'pmd'
            project.apply plugin: 'findbugs'

            tasks.withType(JavaCompile) {
                options.deprecation = true
            }

            def checkstyleFile = new File(rootDir, "config/checkstyle.xml")
            if (checkstyleFile.exists()) {
                project.apply plugin: 'checkstyle'
                checkstyle {
                    configFile = checkstyleFile
                    ignoreFailures = true
                }
            // } else {
            //     checkstyle {
            //         ignoreFailures = true
            //     }
            }

            findbugs {
                ignoreFailures = true
            }

            pmd {
                ruleSets = ["basic", "braces", "design"]
                ignoreFailures = true
            }
        }
    }
}
